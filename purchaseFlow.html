<html lang="ar" dir="rtl"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>البيانات الأساسية – تأمين مركبة</title>
  <link rel="stylesheet" href="dist/output.css">
  <link rel="stylesheet" href="purchaseFlow.css" />
  <style>
    :root{--blue:#1e90ff;--ink:#0b3550}
    body{background:#fff}
    /* أزرار المجموعات (تبدو كالأزرار في الصور) */
    .seg{display:flex;border:1px solid #d9e5f5;border-radius:14px;overflow:hidden;background:#f7fbff}
    .seg button{flex:1;padding:.9rem 1rem;font-weight:600;border-inline-start:1px solid #d9e5f5;transition:.2s}
    .seg button:first-child{border-inline-start:0}
    .seg button:not(.active):hover{background:#eef6ff}
    .seg .active{background:var(--blue);color:#fff;border-color:var(--blue)}
    .seg .disabled{opacity:.5;pointer-events:none;}
    .info{color:var(--blue);border:1px solid #cfe7ff;border-radius:999px;width:22px;height:22px;display:inline-grid;place-items:center;font-size:12px}
    .field{border:1px solid #e5e7eb;border-radius:14px;padding:1rem}
    @keyframes shake { 0%,100%{transform:translateX(0)} 20%{transform:translateX(-6px)} 40%{transform:translateX(6px)} 60%{transform:translateX(-4px)} 80%{transform:translateX(4px)} }
    .shake { animation: shake .35s ease; }
  </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.sticky{position:sticky}.top-0{top:0px}.z-30{z-index:30}.mx-2{margin-left:0.5rem;margin-right:0.5rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.mt-1{margin-top:0.25rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-5{height:1.25rem}.h-9{height:2.25rem}.w-5{width:1.25rem}.w-9{width:2.25rem}.w-full{width:100%}.max-w-6xl{max-width:72rem}.select-none{-webkit-user-select:none;user-select:none}.grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.place-items-center{place-items:center}.items-center{align-items:center}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-b{border-bottom-width:1px}.border-gray-100{--tw-border-opacity:1;border-color:rgb(243 244 246 / var(--tw-border-opacity, 1))}.border-gray-200{--tw-border-opacity:1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-red-400{--tw-border-opacity:1;border-color:rgb(248 113 113 / var(--tw-border-opacity, 1))}.bg-\[\#e9f5ff\]{--tw-bg-opacity:1;background-color:rgb(233 245 255 / var(--tw-bg-opacity, 1))}.bg-\[var\(--blue\)\]{background-color:var(--blue)}.bg-white\/90{background-color:rgb(255 255 255 / 0.9)}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-7{padding-left:1.75rem;padding-right:1.75rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.text-\[var\(--blue\)\]{color:var(--blue)}.text-\[var\(--ink\)\]{color:var(--ink)}.text-gray-300{--tw-text-opacity:1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity:1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity:1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.ring-red-200{--tw-ring-opacity:1;--tw-ring-color:rgb(254 202 202 / var(--tw-ring-opacity, 1))}.backdrop-blur{--tw-backdrop-blur:blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}@media (min-width: 768px){.md\:col-span-2{grid-column:span 2 / span 2}.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}}</style></head>
<body class="text-gray-900">

  <nav class="navbar" aria-label="Main navigation">
    <div class="container nav-inner">
      <a class="brand" href="#" aria-label="تأميني">
        <img src="images/whiteLogo.png" alt="تأميني" id="img-brand" />
        <span class="brand-sub">| سيارات</span>
      </a>
  </nav>
  <!-- ====== PROGRESS BAR (insert here) ====== -->
  <!-- ====== PROGRESS BAR ====== -->
<section class="progress-wrap">
  <div class="container progress-inner">
    <div class="progress-bar">

      <!-- Base blue line -->
      <div class="base-line"></div>

      <!-- Green filled portion -->
      <div class="fill-line"></div>

      <!-- Steps -->
      <div class="step active">
        <span class="num">1</span>
        <span class="label">البيانات الأساسية</span>
      </div>

      <div class="step">
        <span class="num">2</span>
        <span class="label">بيانات التأمين</span>
      </div>

      <div class="step">
        <span class="num">3</span>
        <span class="label">قائمة الأسعار</span>
      </div>

      <div class="step">
        <span class="num">4</span>
        <span class="label">الإضافات</span>
      </div>

      <div class="step">
        <span class="num">5</span>
        <span class="label">الملخص والدفع</span>
      </div>

      <!-- ✅ RIGHT ICON (inside green circle) -->
      <div class="end-icon end-right">
        <div class="icon-circle green-circle">
          <img src="images/carNav.png" alt="Car Icon" class="circle-icon">
        </div>
      </div>

      <!-- ✅ LEFT ICON (inside blue circle) -->
      <div class="end-icon end-left">
        <div class="icon-circle blue-circle">
          <img src="images/vLogo.png" alt="Shield Icon" class="circle-icon">
        </div>
      </div>

    </div>
  </div>
</section>

  <main class="max-w-6xl mx-auto px-4 py-6">
    <h1 class="text-xl font-bold text-[var(--ink)] mb-4">البيانات الأساسية</h1>

    <!-- الغرض من التأمين -->
    <div class="mb-5">
      <div class="text-sm mb-2">الغرض من التأمين</div>
      <div class="seg" role="tablist" aria-label="الغرض من التأمين">
        <button type="button" class="active" data-purpose="new">تأمين جديد</button>
        <button type="button" data-purpose="transfer" class="">نقل الملكية</button>
      </div>
    </div>

    <!-- نوع تسجيل المركبة -->
    <div class="mb-5">
      <div class="text-sm mb-2">نوع تسجيل المركبة</div>
      <div class="seg" role="tablist" aria-label="نوع التسجيل">
        <button type="button" class="" data-reg="seq">الرقم التسلسلي</button>
        <button type="button" data-reg="custom" class="active">بطاقة جمركية (استيراد)</button>
      </div>
    </div>

    <!-- الحقول الرئيسية -->
    <form id="basicForm" class="grid md:grid-cols-2 gap-4">
      <!-- اسم العميل -->
      <div class="field">
        <div class="flex items-center gap-2 mb-2"><span class="info">i</span><span class="text-sm">اسم العميل</span></div>
        <input id="customerName" class="w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="الاسم الكامل" required="">
      </div>

      <!-- الهوية -->
      <div class="field">
        <div class="flex items-center gap-2 mb-2"><span class="info">i</span><span class="text-sm">رقم الهوية <span id="id-extra" class="text-gray-500"></span></span></div>
        <input id="nationalId" class="w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="رقم الهوية الوطنية أو الإقامة أو الشركة" inputmode="numeric" maxlength="10" required="">
      </div>

      <!-- رقم الهاتف -->
      <div class="field">
        <div class="flex items-center gap-2 mb-2"><span class="info">i</span><span class="text-sm">رقم الهاتف</span></div>
        <input id="phoneNumber" class="w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="05xxxxxxxx" inputmode="numeric" maxlength="10" required="">
        <small id="phoneErr" class="text-red-600 text-xs mt-1 hidden">رقم الهاتف غير صحيح. الرجاء إدخال 10 أرقام تبدأ بـ 05.</small>
      </div>

      <!-- تاريخ الميلاد -->
      <div class="field">
        <div class="flex items-center gap-2 mb-2"><span class="info">i</span><span class="text-sm">تاريخ الميلاد</span></div>
        <div class="grid grid-cols-3 gap-3">
          <select name="dob_day" class="rounded-xl border border-gray-200 px-3 py-2" required=""><option value="">اليوم</option><option value="01">1</option><option value="02">2</option><option value="03">3</option><option value="04">4</option><option value="05">5</option><option value="06">6</option><option value="07">7</option><option value="08">8</option><option value="09">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select>
          <select name="dob_month" class="rounded-xl border border-gray-200 px-3 py-2" required="">
            <option value="">الشهر</option>
          <option value="01">يناير</option><option value="02">فبراير</option><option value="03">مارس</option><option value="04">أبريل</option><option value="05">مايو</option><option value="06">يونيو</option><option value="07">يوليو</option><option value="08">أغسطس</option><option value="09">سبتمبر</option><option value="10">أكتوبر</option><option value="11">نوفمبر</option><option value="12">ديسمبر</option></select>
          <select name="dob_year" class="rounded-xl border border-gray-200 px-3 py-2" required="">
            <option value="">السنة</option>
          <option value="2006">2006</option><option value="2005">2005</option><option value="2004">2004</option><option value="2003">2003</option><option value="2002">2002</option><option value="2001">2001</option><option value="2000">2000</option><option value="1999">1999</option><option value="1998">1998</option><option value="1997">1997</option><option value="1996">1996</option><option value="1995">1995</option><option value="1994">1994</option><option value="1993">1993</option><option value="1992">1992</option><option value="1991">1991</option><option value="1990">1990</option><option value="1989">1989</option><option value="1988">1988</option><option value="1987">1987</option><option value="1986">1986</option><option value="1985">1985</option><option value="1984">1984</option><option value="1983">1983</option><option value="1982">1982</option><option value="1981">1981</option><option value="1980">1980</option><option value="1979">1979</option><option value="1978">1978</option><option value="1977">1977</option><option value="1976">1976</option><option value="1975">1975</option><option value="1974">1974</option><option value="1973">1973</option><option value="1972">1972</option><option value="1971">1971</option><option value="1970">1970</option><option value="1969">1969</option><option value="1968">1968</option><option value="1967">1967</option><option value="1966">1966</option><option value="1965">1965</option><option value="1964">1964</option><option value="1963">1963</option><option value="1962">1962</option><option value="1961">1961</option><option value="1960">1960</option><option value="1959">1959</option><option value="1958">1958</option><option value="1957">1957</option><option value="1956">1956</option><option value="1955">1955</option><option value="1954">1954</option><option value="1953">1953</option><option value="1952">1952</option><option value="1951">1951</option><option value="1950">1950</option></select>
        </div>
      </div>

      <!-- الرقم التسلسلي -->
      <div id="seqWrap" class="field md:col-span-2 hidden">
        <div class="flex items-center gap-2 mb-2"><span class="info">i</span><span class="text-sm">الرقم التسلسلي</span></div>
        <input id="sequenceNo" class="w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="الرقم التسلسلي" inputmode="numeric">
      </div>

      <!-- بطاقة جمركية -->
      <div id="customWrap" class="field md:col-span-2">
        <div class="flex items-center gap-2 mb-2"><span class="info">i</span><span class="text-sm">بطاقة جمركية</span></div>
        <input id="customCard" class="w-full rounded-xl border border-gray-200 px-3 py-2" placeholder="رقم البطاقة" inputmode="numeric">
      </div>

      <!-- سنة الصنع -->
      <div id="yearWrap" class="field md:col-span-2">
        <div class="flex items-center gap-2 mb-2"><span class="info">i</span><span class="text-sm">سنة الصنع</span></div>
        <select id="year" class="w-full rounded-xl border border-gray-200 px-3 py-2" required=""><option value="2025">2025</option><option value="2024">2024</option><option value="2023">2023</option><option value="2022">2022</option><option value="2021">2021</option><option value="2020">2020</option><option value="2019">2019</option><option value="2018">2018</option><option value="2017">2017</option><option value="2016">2016</option><option value="2015">2015</option><option value="2014">2014</option><option value="2013">2013</option><option value="2012">2012</option><option value="2011">2011</option><option value="2010">2010</option><option value="2009">2009</option><option value="2008">2008</option><option value="2007">2007</option><option value="2006">2006</option><option value="2005">2005</option><option value="2004">2004</option><option value="2003">2003</option><option value="2002">2002</option><option value="2001">2001</option><option value="2000">2000</option></select>
      </div>

      <div class="md:col-span-2">
        <p class="hint">بالضغط على التالي، أوافق على منح منصتنا الحق في الاستعلام عن بياناتي وبيانات مركبتي من الجهات المعنية لأجل إصدار الاسعار</p>
      </div>

      <!-- زر التالي -->
      <div class="md:col-span-2 flex items-center gap-3">
          <button type="button" id="next-btn" class="btn-next">التالي</button>
      </div>
    </form>
  </main>

  <!-- ====== FOOTER ====== -->
  <footer class="footer">
    <div class="container footer-grid">
      <div class="footer-col logo-col">
        <img src="images/whiteLogo.png" alt="تأميني" class="footer-logo" />

        <p class="dev">
          تطوير وتشغيل 
          <img src="images/rasan.png" alt="Rasan" class="rasan-logo" />
        </p>

        <p class="copyright">© تأميني 2025. جميع الحقوق محفوظة</p>
      </div>

      <div class="footer-col">
        <h4>المنتجات</h4>
        <ul>
          <li><a href="#">تأمين السيارات</a></li>
          <li><a href="#">تأمين السفر</a></li>
          <li><a href="#">تأمين المنزل</a></li>
          <li><a href="#">تأمين الإقامة المميزة</a></li>
          <li><a href="#">تأمين المنشآت</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>الدعم</h4>
        <ul>
          <li><a href="#">تواصل معنا</a></li>
          <li><a href="#">سياسة الخصوصية</a></li>
          <li><a href="#">الشروط والأحكام</a></li>
        </ul>
      </div>

      <div class="footer-col">
        <h4>الموارد</h4>
        <ul>
          <li><a href="#">الأسئلة الشائعة</a></li>
          <li><a href="#">مدونة تأميني</a></li>
          <li><a href="#">لوائح هيئة التأمين</a></li>
          <li><a href="#">شركاؤنا</a></li>
          <li><a href="#">الوظائف</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <script>
  const qs = (s, p = document) => p.querySelector(s);
  const qsa = (s, p = document) => [...p.querySelectorAll(s)];

  const purposeBtns = qsa('[data-purpose]');
  const regBtns = qsa('[data-reg]');

  function lockRegToSeq(isLocked) {
    const seqBtn = qs('[data-reg="seq"]');
    const customBtn = qs('[data-reg="custom"]');
    if (isLocked) {
      regBtns.forEach(b => b.classList.remove('active'));
      seqBtn.classList.add('active');
      customBtn.classList.add('disabled');
      qs('#seqWrap').classList.remove('hidden');
      qs('#sequenceNo').setAttribute('required', '');
      qs('#customWrap').classList.add('hidden');
    } else {
      customBtn.classList.remove('disabled');
    }
  }

  function updateYearVisibility() {
    const purpose = qs('[data-purpose].active').dataset.purpose; // new | transfer
    const regType = qs('[data-reg].active').dataset.reg;         // seq | custom
    const showYear = (purpose === 'transfer') || (regType === 'custom');
    qs('#yearWrap').classList.toggle('hidden', !showYear);
    qs('#year').toggleAttribute('required', showYear);
  }

  // تفعيل أزرار الغرض
  purposeBtns.forEach(btn => btn.addEventListener('click', () => {
    purposeBtns.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const isTransfer = btn.dataset.purpose === 'transfer';
    qs('#id-extra').textContent = isTransfer ? '(المالك الجديد)' : '';
    lockRegToSeq(isTransfer);
    updateYearVisibility();
  }));

  // تفعيل أزرار نوع التسجيل
  regBtns.forEach(btn => btn.addEventListener('click', () => {
    const isTransfer = (qs('[data-purpose].active')?.dataset.purpose === 'transfer');
    if (isTransfer && btn.dataset.reg === 'custom') return;
    regBtns.forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    const isSeq = btn.dataset.reg === 'seq';
    qs('#seqWrap').classList.toggle('hidden', !isSeq);
    qs('#sequenceNo').toggleAttribute('required', isSeq);
    qs('#customWrap').classList.toggle('hidden', isSeq);
    updateYearVisibility();
  }));

  // تعبئة اليوم/الشهر/السنة
  (function fillDOB() {
  const months = ["يناير", "فبراير", "مارس", "أبريل", "مايو", "يونيو", "يوليو", "أغسطس", "سبتمبر", "أكتوبر", "نوفمبر", "ديسمبر"];
  const ySel = qs('[name="dob_year"]');
  const mSel = qs('[name="dob_month"]');
  const dSel = qs('[name="dob_day"]');

  // Fill years
  for (let y = 2006; y >= 1950; y--) ySel.add(new Option(y, y));
  // Fill months
  months.forEach((m, i) => mSel.add(new Option(m, String(i + 1).padStart(2, '0'))));
  // ✅ Pre-fill all 31 days initially
  for (let d = 1; d <= 31; d++) dSel.add(new Option(d, String(d).padStart(2, '0')));

  function fillDays() {
    const y = +ySel.value, m = +mSel.value;
    if (!y || !m) return;  // don't clear user's choice if not ready
    const days = new Date(y, m, 0).getDate();
    const selectedDay = dSel.value;
    dSel.innerHTML = '<option value="">اليوم</option>';
    for (let d = 1; d <= days; d++) {
      const opt = new Option(d, String(d).padStart(2, '0'));
      if (String(d).padStart(2, '0') === selectedDay) opt.selected = true;
      dSel.add(opt);
    }
  }

  mSel.onchange = ySel.onchange = fillDays;
})();


  // التحقق من رقم الهاتف
  qs('#phoneNumber').oninput = () => {
    let v = qs('#phoneNumber').value.replace(/\D/g, '').slice(0, 10);
    qs('#phoneNumber').value = v;
    const phoneErr = qs('#phoneErr');
    if (v.length === 10 && v.startsWith('05')) {
      phoneErr.classList.add('hidden');
      qs('#phoneNumber').classList.remove('border-red-400', 'ring-2', 'ring-red-200');
    } else if (v.length > 0) {
      phoneErr.classList.remove('hidden');
      qs('#phoneNumber').classList.add('border-red-400', 'ring-2', 'ring-red-200');
    } else {
      phoneErr.classList.add('hidden');
      qs('#phoneNumber').classList.remove('border-red-400', 'ring-2', 'ring-red-200');
    }
  };

  // تأكّد من القفل الافتراضي حال تم فتح الصفحة وتغيير الحالة لاحقًا
  lockRegToSeq(qs('[data-purpose].active').dataset.purpose === 'transfer');
</script>

<script src="purchaseFlow.js"></script>
</body>

</html>